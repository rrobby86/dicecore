var Z=Object.defineProperty,q=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var N=(s,e,o)=>e in s?Z(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,L=(s,e)=>{for(var o in e||(e={}))E.call(e,o)&&N(s,o,e[o]);if(I)for(var o of I(e))G.call(e,o)&&N(s,o,e[o]);return s},T=(s,e)=>q(s,z(e));import{d as H,o as i,c as S,a as p,b as t,r as U,e as g,T as X,f as b,n as v,u,g as y,w as P,h as $,F as C,t as M,i as k,m as V,j as K,k as j,l as J,v as Q,p as W,q as Y,s as ee,x as oe,y as se}from"./vendor.788973b3.js";const te=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function o(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerpolicy&&(n.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?n.credentials="include":l.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(l){if(l.ep)return;l.ep=!0;const n=o(l);fetch(l.href,n)}};te();function le(s){return[...Array(s)].map(e=>[...Array(4)].map(o=>[]))}const O=H("scores",{state:()=>({nextId:0,rounds:3,scores:[]}),getters:{roundScores:s=>{const e=[];for(const r of s.scores){const l=[];for(const n of r.scores){var o=0;for(const[d,_]of n.entries())for(const h of _)o+=(d+1)*h;l.push(o)}e.push(l)}return e},totalScores:s=>{const e=[];for(const r of s.roundScores){var o=0;for(const l of r)o+=l;e.push(o)}return e}},actions:{addPlayer(s){this.scores.push(T(L({id:this.nextId},s),{scores:le(this.rounds)}));var e=0;for(var o of this.scores)o.id>e&&(e=o.id);this.nextId=e+1},updatePlayer(s,e){this.scores[s].name=e.name,this.scores[s].color=e.color},removePlayer(s){this.nextId=this.scores[s].id,this.scores.splice(s,1)},shuffle(){for(let o=this.scores.length-1;o>0;o--){var s=Math.floor(Math.random()*(o+1)),e=this.scores[o];this.scores[o]=this.scores[s],this.scores[s]=e}},rank(){const s=[...Array(this.scores.length)].map((o,r)=>({index:r,score:this.totalScores[r]}));s.sort((o,r)=>r.score-o.score);const e=s.map(o=>this.scores[o.index]);this.scores.splice(0,e.length,...e)},clearScores(){for(var s of this.scores)for(var e of s.scores)for(var o of e)o.splice(0)},clearAll(){this.scores.splice(0),this.nextId=0}},persist:!0}),w={red:{main:"#ff0000",fg:"#ffffff"},orange:{main:"#ff8800",fg:"#000000"},yellow:{main:"#ffff00",fg:"#000000"},green:{main:"#00ff00",fg:"#000000"},cyan:{main:"#66ccff",fg:"#000000"},blue:{main:"#2222ff",fg:"#ffffff"},pink:{main:"#ff99ff",fg:"#000000"},purple:{main:"#880088",fg:"#ffffff"}};const re={key:0,class:"modal-overlay"},ne={class:"modal-container"},A={props:["open"],setup(s){return(e,o)=>(i(),S(X,{to:"#modals"},[s.open?(i(),p("div",re,[t("div",ne,[U(e.$slots,"default")])])):g("",!0)]))}};const ce={class:"die"},ae={viewBox:"0 0 100 100"},B={props:["value","color","pips"],setup(s){const e=s,o=b(()=>e.value>=2),r=b(()=>e.value%2),l=b(()=>e.value>=4),n=b(()=>e.value===6);return(d,_)=>(i(),p("button",ce,[(i(),p("svg",ae,[t("path",{style:v({fill:s.color}),d:"M20 20h80v80h-80Z"},null,4),t("path",{style:v({fill:s.color}),d:"M0 4l16 16v76l-16 -16Z"},null,4),t("path",{style:v({fill:s.color}),d:"M4 0h76l16 16h-76Z"},null,4),u(o)?(i(),p("circle",{key:0,class:"pip",cx:"40",cy:"40",r:"8",style:v({fill:s.pips})},null,4)):g("",!0),u(n)?(i(),p("circle",{key:1,class:"pip",cx:"60",cy:"40",r:"8",style:v({fill:s.pips})},null,4)):g("",!0),u(l)?(i(),p("circle",{key:2,class:"pip",cx:"80",cy:"40",r:"8",style:v({fill:s.pips})},null,4)):g("",!0),u(r)?(i(),p("circle",{key:3,class:"pip",cx:"60",cy:"60",r:"8",style:v({fill:s.pips})},null,4)):g("",!0),u(l)?(i(),p("circle",{key:4,class:"pip",cx:"40",cy:"80",r:"8",style:v({fill:s.pips})},null,4)):g("",!0),u(n)?(i(),p("circle",{key:5,class:"pip",cx:"60",cy:"80",r:"8",style:v({fill:s.pips})},null,4)):g("",!0),u(o)?(i(),p("circle",{key:6,class:"pip",cx:"80",cy:"80",r:"8",style:v({fill:s.pips})},null,4)):g("",!0)]))]))}};const ie={class:"scoremod-root flex-col flex-gap-m"},ue={class:"scoremod-main flex-row flex-gap-m"},de={class:"scoremod-dice flex-col flex-gap-m"},fe={class:"scoremod-slots flex-grow flex-col flex-gap-m"},pe=["onClick"],ve={class:"scoremod-slot-label"},_e={class:"scoremod-footer flex-row flex-gap-m"},me={class:"scoremod-total flex-grow"},ye={props:["target"],emits:["close"],setup(s){const e=s,o=O(),r=()=>o.scores[e.target.player].scores[e.target.round],l=b(()=>({color:w[o.scores[e.target.player].color].main,pips:w[o.scores[e.target.player].color].fg}));b(()=>o.scores[e.target.player].color.main);const n=b(()=>o.roundScores[e.target.player][e.target.round]),d=y(null);function _(f){d.value!==null&&r()[d.value].push(f)}function h(f,a){r()[f].splice(a,1)}return(f,a)=>(i(),S(A,{open:s.target!==null},{default:P(()=>[t("div",ie,[t("div",ue,[t("div",de,[(i(),p(C,null,$(6,c=>k(B,V({key:c,value:c},u(l),{onClick:m=>_(c)}),null,16,["value","onClick"])),64))]),t("div",fe,[(i(),p(C,null,$([3,2,1,0],c=>t("div",{class:K(["scoremod-slot",{selected:d.value===c}]),onClick:m=>d.value=c},[t("div",ve,M(c+1)+"x",1),(i(!0),p(C,null,$(r()[c],(m,x)=>(i(),S(B,V({key:x,value:m},u(l),{onClick:D=>h(c,x)}),null,16,["value","onClick"]))),128))],10,pe)),64))])]),t("div",_e,[t("button",{class:"scoremod-ok",onClick:a[0]||(a[0]=c=>s.target=null)},"OK"),t("div",me,M(u(n)),1)])])]),_:1},8,["open"]))}};const he={class:"playermod-root flex-col flex-gap-m"},ge={class:"playermod-palette"},ke=["onClick"],be={emits:["confirmed"],setup(s,{expose:e,emit:o}){const r=y(!1),l=y(null),n=j({name:"",color:null});function d(h,f={name:"",color:null}){r.value=!0,l.value=h,n.name=f.name,n.color=f.color}function _(){r.value=!1,o("confirmed",l.value,n)}return e({open:d}),(h,f)=>(i(),S(A,{open:r.value},{default:P(()=>[t("div",he,[J(t("input",{class:"playermod-name","onUpdate:modelValue":f[0]||(f[0]=a=>u(n).name=a)},null,512),[[Q,u(n).name]]),t("div",ge,[(i(!0),p(C,null,$(u(w),(a,c)=>(i(),p("button",{class:K(["playermod-color",{selected:u(n).color===c}]),key:a.id,style:v({backgroundColor:a.main}),onClick:m=>u(n).color=c},null,14,ke))),128))]),t("button",{onClick:_},"OK"),t("button",{onClick:f[1]||(f[1]=a=>r.value=!1)},"Cancel")])]),_:1},8,["open"]))}},xe={class:"reset-root flex-col flex-gap-m"},$e={setup(s,{expose:e}){const o=O(),r=y(!1);function l(){r.value=!0}return e({open:l}),(n,d)=>(i(),S(A,{open:r.value},{default:P(()=>[t("div",xe,[t("button",{onClick:d[0]||(d[0]=_=>{u(o).clearScores(),r.value=!1})},"Reset scores"),t("button",{onClick:d[1]||(d[1]=_=>{u(o).clearAll(),r.value=!1})},"Reset all"),t("button",{onClick:d[2]||(d[2]=_=>r.value=!1)},"Cancel")])]),_:1},8,["open"]))}};const Ce={class:"aboutroot flex-col flex-gap-m"},Se=t("p",{class:"title"},"DiceCore",-1),Me=t("p",null,[W("A minimalistic scoreboard for "),t("a",{href:"https://boardgamegeek.com/boardgame/16747/tumblin-dice",target:"_blank"},"Tumblin-Dice")],-1),we=t("p",null,'by rrobby86 / "barbap"',-1),Pe=t("a",{href:"https://github.com/rrobby86/dicecore",target:"_blank"},"Help and source code",-1),Ae={setup(s,{expose:e}){const o=y(!1);function r(){o.value=!0}return e({open:r}),(l,n)=>(i(),S(A,{open:o.value},{default:P(()=>[t("div",Ce,[Se,Me,we,Pe,t("button",{onClick:n[0]||(n[0]=d=>o.value=!1)},"OK")])]),_:1},8,["open"]))}};const Oe={class:"main"},De={class:"main-topbar"},Ie={class:"main-buttons"},Ne={class:"main-table"},Le={class:"scoretable"},Te={class:"player-root"},Ve={class:"player-name"},Be={class:"player-buttons"},Ke=["onClick"],Re=["onClick"],Fe=["onClick"],Ze={setup(s){const e=O(),o=y(null),r=y(),l=y(),n=y(),d=f=>({backgroundColor:w[f.color].main,color:w[f.color].fg});function _(f,a){o.value={player:f,round:a}}function h(f,a){f===-1?e.addPlayer(a):e.updatePlayer(f,a)}return(f,a)=>(i(),p("div",Oe,[t("div",De,[t("div",{class:"main-title",onClick:a[0]||(a[0]=(...c)=>n.value.open&&n.value.open(...c))},"DiceCore"),t("div",Ie,[t("button",{onClick:a[1]||(a[1]=c=>r.value.open(-1))},"Add"),t("button",{onClick:a[2]||(a[2]=(...c)=>u(e).shuffle&&u(e).shuffle(...c))},"Shuffle"),t("button",{onClick:a[3]||(a[3]=(...c)=>u(e).rank&&u(e).rank(...c))},"Rank"),t("button",{onClick:a[4]||(a[4]=(...c)=>l.value.open&&l.value.open(...c))},"Reset")])]),t("div",Ne,[t("table",Le,[k(Y,{name:"player-rows"},{default:P(()=>[(i(!0),p(C,null,$(u(e).scores,(c,m)=>(i(),p("tr",{key:c.id},[t("td",{class:"player-cell",style:v(d(c))},[t("div",Te,[t("div",Ve,M(c.name),1),t("div",Be,[t("button",{onClick:x=>r.value.open(m,c)},"M",8,Ke),t("button",{onClick:x=>u(e).removePlayer(m)},"X",8,Re)])])],4),(i(!0),p(C,null,$(u(e).roundScores[m],(x,D)=>(i(),p("td",{class:"score-cell",onClick:Ee=>_(m,D)},M(x),9,Fe))),256)),t("td",{class:"total-cell",style:v(d(c))},M(u(e).totalScores[m]),5)]))),128))]),_:1})])]),k(ye,{target:o.value,onClose:a[5]||(a[5]=c=>o.value=null)},null,8,["target"]),k(be,{ref_key:"playerModal",ref:r,onConfirmed:h},null,512),k($e,{ref_key:"resetModal",ref:l},null,512),k(Ae,{ref_key:"aboutModal",ref:n},null,512)]))}};const qe={class:"root-container"},ze={setup(s){return(e,o)=>(i(),p("div",qe,[k(Ze)]))}},R=ee(ze),F=oe();F.use(se);R.use(F);R.mount("#app");
